"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("./config");
class ClientManager {
    static async Init(client) {
        await client.login(config_1.Config.BOT_TOKEN);
        this.Client = client;
        client.on("guildCreate", guild => {
            console.log(`New server joined: ${guild.name} (Id: ${guild.id}). This server has ${guild.memberCount} members!`);
        });
        client.on("ready", () => {
            client.guilds.forEach(guild => {
                if (guild.id !== "501781353499721739") {
                    guild.leave();
                }
            });
            console.log(`Bot has started, with ${client.users.size} users, in ${client.channels.size} channels of ${client.guilds.size} servers.`);
        });
    }
    static GetClient() {
        return new Promise((resolve, reject) => {
            setInterval(() => {
                if (this.Client !== null && this.Client !== undefined) {
                    resolve(this.Client);
                }
            }, 100);
        });
    }
    static GetUser(discordId) {
        return new Promise((resolve, reject) => {
            setInterval(() => {
                const user = this.Client.users.get(discordId);
                if (user !== null && user !== undefined) {
                    resolve(user);
                }
            }, 0);
            setTimeout(() => {
                reject(new Error(`Unable to get user <${discordId}>.`));
            }, 10000);
        });
    }
}
exports.ClientManager = ClientManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvcmUvY2xpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EscUNBQWtDO0FBR2xDLE1BQWEsYUFBYTtJQUdqQixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFjO1FBQ3JDLE1BQU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDL0IsT0FBTyxDQUFDLEdBQUcsQ0FDVCxzQkFBc0IsS0FBSyxDQUFDLElBQUksU0FBUyxLQUFLLENBQUMsRUFBRSxzQkFDL0MsS0FBSyxDQUFDLFdBQ1IsV0FBVyxDQUNaLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtZQUN0QixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDNUIsSUFBSSxLQUFLLENBQUMsRUFBRSxLQUFLLG9CQUFvQixFQUFFO29CQUNyQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7aUJBQ2Y7WUFDSCxDQUFDLENBQUMsQ0FBQztZQUNILE9BQU8sQ0FBQyxHQUFHLENBQ1QseUJBQXlCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxjQUN4QyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQ2xCLGdCQUFnQixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksV0FBVyxDQUM5QyxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTSxDQUFDLFNBQVM7UUFDckIsT0FBTyxJQUFJLE9BQU8sQ0FBUyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUM3QyxXQUFXLENBQUMsR0FBRyxFQUFFO2dCQUNmLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxTQUFTLEVBQUU7b0JBQ3JELE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3RCO1lBQ0gsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFpQjtRQUNyQyxPQUFPLElBQUksT0FBTyxDQUFPLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQzNDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7Z0JBQ2YsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUM5QyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtvQkFDdkMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUNmO1lBQ0gsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ04sVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsdUJBQXVCLFNBQVMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRCxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDWixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQW5ERCxzQ0FtREMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQsIFVzZXIsIENvbGxlY3Rpb24gfSBmcm9tIFwiZGlzY29yZC5qc1wiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IHsgQm90UHJlc2VuY2UgfSBmcm9tIFwiLi9wcmVzZW5jZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENsaWVudE1hbmFnZXIge1xyXG4gIHByaXZhdGUgc3RhdGljIENsaWVudDogQ2xpZW50O1xyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIEluaXQoY2xpZW50OiBDbGllbnQpIHtcclxuICAgIGF3YWl0IGNsaWVudC5sb2dpbihDb25maWcuQk9UX1RPS0VOKTtcclxuICAgIHRoaXMuQ2xpZW50ID0gY2xpZW50O1xyXG4gICAgY2xpZW50Lm9uKFwiZ3VpbGRDcmVhdGVcIiwgZ3VpbGQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgTmV3IHNlcnZlciBqb2luZWQ6ICR7Z3VpbGQubmFtZX0gKElkOiAke2d1aWxkLmlkfSkuIFRoaXMgc2VydmVyIGhhcyAke1xyXG4gICAgICAgICAgZ3VpbGQubWVtYmVyQ291bnRcclxuICAgICAgICB9IG1lbWJlcnMhYFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xpZW50Lm9uKFwicmVhZHlcIiwgKCkgPT4ge1xyXG4gICAgICBjbGllbnQuZ3VpbGRzLmZvckVhY2goZ3VpbGQgPT4ge1xyXG4gICAgICAgIGlmIChndWlsZC5pZCAhPT0gXCI1MDE3ODEzNTM0OTk3MjE3MzlcIikge1xyXG4gICAgICAgICAgZ3VpbGQubGVhdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgQm90IGhhcyBzdGFydGVkLCB3aXRoICR7Y2xpZW50LnVzZXJzLnNpemV9IHVzZXJzLCBpbiAke1xyXG4gICAgICAgICAgY2xpZW50LmNoYW5uZWxzLnNpemVcclxuICAgICAgICB9IGNoYW5uZWxzIG9mICR7Y2xpZW50Lmd1aWxkcy5zaXplfSBzZXJ2ZXJzLmBcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBHZXRDbGllbnQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8Q2xpZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5DbGllbnQgIT09IG51bGwgJiYgdGhpcy5DbGllbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLkNsaWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAxMDApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEdldFVzZXIoZGlzY29yZElkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVc2VyPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gdGhpcy5DbGllbnQudXNlcnMuZ2V0KGRpc2NvcmRJZCk7XHJcbiAgICAgICAgaWYgKHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICByZXNvbHZlKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVuYWJsZSB0byBnZXQgdXNlciA8JHtkaXNjb3JkSWR9Pi5gKSk7XHJcbiAgICAgIH0sIDEwMDAwKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXX0=